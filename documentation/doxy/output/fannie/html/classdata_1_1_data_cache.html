<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CORE POS - Fannie: data::DataCache Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<b>data</b>::<a class="el" href="classdata_1_1_data_cache.html">DataCache</a></div>
<h1>data::DataCache Class Reference</h1><!-- doxytag: class="data::DataCache" --><a href="classdata_1_1_data_cache-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdata_1_1_data_cache.html#68d80e9909fc57dd41d65ce5de3a7854">genKey</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdata_1_1_data_cache.html#a758e808e95d57105b07bc2e2ea5fab8">check</a> ($key=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdata_1_1_data_cache.html#ad1ea3bba1b4bb8dabe1ed05c3623b09">freshen</a> ($data, $ttl='day', $key=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdata_1_1_data_cache.html#a99539c361e3ab6405bb7b77051fe4cc">getFile</a> ($ttl, $key=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdata_1_1_data_cache.html#a21d359358560578e114a2077089d39c">putFile</a> ($ttl, $content, $key=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdata_1_1_data_cache.html#b6dd897434dd1927f9ef6a998e69f32e">fileCacheDir</a> ($type)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Store data for later. This is a more generic caching option based on FannieReportPage. Data is automatically keyed by URL (hint: use GET parameters instead of POST). In theory you can cache any serializable data structure. It's typically used for caching query results. 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a758e808e95d57105b07bc2e2ea5fab8"></a><!-- doxytag: member="data::DataCache::check" ref="a758e808e95d57105b07bc2e2ea5fab8" args="($key=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static data::DataCache::check           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>key</em> = <code>false</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Look for cached data<p>
Data is stored in the archive database, reportDataCache table.<p>
The default key column is an MD5 hash of the current URL (minus the excel parameter, if present). This means your forms should use type GET if caching is enabled. If a key argument is provided, that key is hashed instead.<p>
The data is stored as a serialized, gzcompressed string. 
</div>
</div><p>
<a class="anchor" name="b6dd897434dd1927f9ef6a998e69f32e"></a><!-- doxytag: member="data::DataCache::fileCacheDir" ref="b6dd897434dd1927f9ef6a998e69f32e" args="($type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static data::DataCache::fileCacheDir           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get filesystem path for storing cache data Auto-creates directories as needed <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$type</em>&nbsp;</td><td>[string] monthly or daily </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>[string] path or false </dd></dl>

</div>
</div><p>
<a class="anchor" name="ad1ea3bba1b4bb8dabe1ed05c3623b09"></a><!-- doxytag: member="data::DataCache::freshen" ref="ad1ea3bba1b4bb8dabe1ed05c3623b09" args="($data, $ttl='day', $key=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static data::DataCache::freshen           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>ttl</em> = <code>'day'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>key</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Store data in the cache <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$data</em>&nbsp;</td><td>the data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$ttl</em>&nbsp;</td><td>how long data is valid. Options are 'day' and 'month' </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$key</em>&nbsp;</td><td>[optional] custom lookup key </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True or False based on success</dd></dl>
See <a class="el" href="classdata_1_1_data_cache.html#a758e808e95d57105b07bc2e2ea5fab8">check()</a> for details 
</div>
</div><p>
<a class="anchor" name="68d80e9909fc57dd41d65ce5de3a7854"></a><!-- doxytag: member="data::DataCache::genKey" ref="68d80e9909fc57dd41d65ce5de3a7854" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static data::DataCache::genKey           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate default hash value for caching. Uses request URI excluding output formatting options<p>
<dl compact><dt><b>Returns:</b></dt><dd>md5 string </dd></dl>

</div>
</div><p>
<a class="anchor" name="a99539c361e3ab6405bb7b77051fe4cc"></a><!-- doxytag: member="data::DataCache::getFile" ref="a99539c361e3ab6405bb7b77051fe4cc" args="($ttl, $key=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static data::DataCache::getFile           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>key</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get info from filesystem cache <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ttl</em>&nbsp;</td><td>[string] daily or monthly </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$key</em>&nbsp;</td><td>[optional] use custom key </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>cached content or false </dd></dl>

</div>
</div><p>
<a class="anchor" name="a21d359358560578e114a2077089d39c"></a><!-- doxytag: member="data::DataCache::putFile" ref="a21d359358560578e114a2077089d39c" args="($ttl, $content, $key=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static data::DataCache::putFile           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>key</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Store info to filesystem cache <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$ttl</em>&nbsp;</td><td>[string] monthly or daily </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$content</em>&nbsp;</td><td>[string] content to cache </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$key</em>&nbsp;</td><td>[optional] custom key </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>[boolean] true or false </dd></dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>fannie/classlib2.0/data/DataCache.php</ul>
<hr size="1"><address style="align: right;"><small>Generated on 9 Feb 2015 for CORE POS - Fannie by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
